"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const nock_1 = (0, tslib_1.__importDefault)(require("nock"));
const snakecase_keys_1 = (0, tslib_1.__importDefault)(require("snakecase-keys"));
const resources_1 = require("../../api/resources");
const TestBackendAPI_1 = require("../TestBackendAPI");
test('createSMSMessage() sends an SMS message', async () => {
    const phoneNumberId = 'idn_random';
    const message = 'Press F to pay pespects';
    (0, nock_1.default)('https://api.clerk.dev')
        .post('/v1/sms_messages', (0, snakecase_keys_1.default)({ phoneNumberId, message }))
        .replyWithFile(200, __dirname + '/responses/createSMSMessage.json', {
        'Content-Type': 'application/x-www-form-urlencoded',
    });
    const smsMessage = await TestBackendAPI_1.TestBackendAPIClient.smsMessages.createSMSMessage({
        phoneNumberId,
        message,
    });
    const expected = new resources_1.SMSMessage({
        fromPhoneNumber: '+19516231001',
        toPhoneNumber: '+306957178227',
        phoneNumberId,
        message,
        status: 'queued',
    });
    expect(smsMessage).toMatchObject(expected);
});
