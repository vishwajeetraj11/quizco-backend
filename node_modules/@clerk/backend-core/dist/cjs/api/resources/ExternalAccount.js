"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ExternalAccount = void 0;
const JSON_1 = require("./JSON");
class ExternalAccount {
    constructor(data = {}) {
        Object.assign(this, ExternalAccount.defaults, data);
    }
    static fromJSON(data) {
        const obj = {};
        obj.id = data.id;
        obj.approvedScopes = data.approved_scopes;
        obj.emailAddress = data.email_address;
        switch (data.object) {
            case JSON_1.ObjectType.FacebookAccount: {
                obj.provider = 'facebook';
                const fbData = data;
                obj.externalId = fbData.facebook_id;
                obj.firstName = fbData.first_name;
                obj.lastName = fbData.last_name;
                obj.picture = data.picture;
                break;
            }
            case JSON_1.ObjectType.GoogleAccount: {
                obj.provider = 'google';
                const gData = data;
                obj.externalId = gData.google_id;
                obj.firstName = gData.given_name;
                obj.lastName = gData.family_name;
                obj.picture = data.picture;
                break;
            }
            case JSON_1.ObjectType.ExternalAccount: {
                obj.provider = data.provider;
                const extData = data;
                obj.externalId = extData.provider_user_id;
                obj.firstName = extData.first_name;
                obj.lastName = extData.last_name;
                obj.picture = extData.avatar_url;
                break;
            }
            default:
                throw new Error('Unsupported external account type');
        }
        return new ExternalAccount(obj);
    }
}
exports.ExternalAccount = ExternalAccount;
ExternalAccount.attributes = [
    'id',
    'provider',
    'externalId',
    'approvedScopes',
    'emailAddress',
    'firstName',
    'lastName',
    'picture',
];
ExternalAccount.defaults = {};
